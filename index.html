<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw Controller</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js" integrity="sha512-uaz5GpnQoE6t5echKlX8P52czvsIGgLPcvlzfvRubLZ1Hp8JemUDnbUiAahbVtPb+jUVrNETuXvAhDDF/N3M4w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>

    <input type="button" id="resetButton" value="Reset Draw">
    <!-- <input type="button" id="ToggleModeButton" value="Toggle Mode"> -->
    <select id="ToggleModeButton">
        <option value="point" selected>Point</option>
        <option value="live">Live</option>
        <option value="letter">Letter</option>
    </select>

    <input type="text" id="TEXT">
    <input type="button" id="textValidation" value="OK">

    QLC+ IP:
    <input type="text" id="qlcplusIP" value="127.0.0.1:9999"/>
    <input type="button" value="Connect" onclick="javascript:connectToWebSocket(document.getElementById('qlcplusIP').value);">
    <div id="connStatus" style="display: inline-block;"><font color=red>Not connected</font></div>
    <div id="pointList"></div>
</body>

<script src="qlcWebsocket.js"></script>
<script src="drawing.js"></script>

<script>
    const buttonReset = document.querySelector("#resetButton");
    buttonReset.addEventListener("click", resetCanvas);

    const ToggleModeButton = document.querySelector("#ToggleModeButton");
    ToggleModeButton.addEventListener("change", (e) => {
        savedPoint = []
        indexArray = 0
        mode = e.target.value 
        // console.log(e.target.value)
    } );

    const validTextButton = document.querySelector("#textValidation");
    
    validTextButton.addEventListener("click", () => { 
        let valueText = document.querySelector("#TEXT").value
        createLetterPoint(valueText, savedPoint) 
    });

    window.onload = (event) => {
        let ip = localStorage.getItem("ipQLC");
        if(ip != null){
            document.getElementById('qlcplusIP').value = ip
        }else{
            console.warn("not ip in storage")
        }
        
    }
</script>

</html>